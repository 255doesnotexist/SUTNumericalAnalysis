clc
% A=[ 5     1     1
%     1     2     2
%     1     1    -1]
% B=[10
%     11
%     0]
%
% AB=[A B]
% 
% AB=[...
%     1.00  2.00  1.00  1.00    2.00
%     0.00  1.00  2.00  2.00    1.00
%     2.00  4.00  4.00  1.00    8.00
%     3.00  3.00  6.00  5.00   -4.00]

%    AB=[1.10  1.00  0.90  0.80  0.70    1.70
% 4.00  5.00  3.00  2.50  2.40    3.00
% 4.00  2.00 10.00  3.50  8.00    1.00
% 1.00  1.00  1.00  2.00  1.00   10.00
% 2.00  2.00  2.00  3.00  5.00    8.00]
 % 
 % AB=[...
 %   0.00  2.00 -1.00 -2.00   -7.00
 %   2.00 -2.00  4.00 -1.00    6.00
 %   1.00  1.00  1.00  1.00   10.00
 %  -2.00  1.00 -2.00  1.00   -2.00]

 AB=[...
       2.10  1.00  0.90  0.80  0.70    1.70
   4.20  2.00  3.00  2.50  2.40    3.00
   4.00  2.00 10.00  3.50  8.00    1.00
   1.00  1.00  1.00  2.00  1.00   10.00
   2.00  2.00  2.00  3.00  5.00    8.00]



   n=size(AB,1)
for j=1:n-1

    tmpVec=AB(j:end,j)
    [mV i]=max(tmpVec);
i=i+j-1;
    tmp=AB(i,:);
    AB(i,:)=AB(j,:);
    AB(j,:)=tmp;

    for i=j+1:n
        AB(i ,: )=AB(i ,: )-AB(i,j)*AB(j,:)/AB(j,j)
    end
end
AB


% x4=AB(4,5)/AB(4,4)
% x3=(AB(3,5)-AB(3,4)*x4)/AB(3,3)
% x2=(AB(2,5)-AB(2,3)*x3-AB(2,4)*x4)/AB(2,2)
% x1=(AB(1,5)-AB(1,2)*x2-AB(1,3)*x3-AB(1,4)*x4)/AB(1,1)
% x1=0;
% x2=0;
% x3=0;
% x4=0;
% x4=(AB(4,5)- x1*AB(4,1)-x2*AB(4,2)-x3*AB(4,3)) /AB(4,4)
% x3=(AB(3,5)- x1*AB(3,1)-x2*AB(3,2)-x4*AB(3,4)) /AB(3,3)
xx=zeros(1,n);
for i=n:-1:1
    tmp=0
    for j=1:n
        if j~=i
        tmp=tmp+xx(j)*AB(i,j);
        end
    end
    xx(i)=(AB(i,n+1)-tmp)/AB(i,i);
end

xx
